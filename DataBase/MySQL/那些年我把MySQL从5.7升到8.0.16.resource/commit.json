{"compress":true,"commitItems":[["54759960-76d6-4448-9678-ad4f87491b91",1575449160185,"",[[1575449145251,["Administrator@zhrb",[[1,0,"# 那些年我把MySQL从5.7升到8.0.16\n\n\n\n"]],[0,0],[27,27]]],[1575449164985,["Administrator@zhrb",[[1,28,"\n"]],[26,26],[27,27]]],[1575449165125,["Administrator@zhrb",[[1,29,"\n"]],[27,27],[28,28]]],[1575449165277,["Administrator@zhrb",[[1,30,"\n"]],[28,28],[29,29]]],[1575449175841,["Administrator@zhrb",[[1,29,"升级后关于代码层的"]],[29,29],[38,38]]],[1575449178661,["Administrator@zhrb",[[-1,34,"代码层的"]],[38,38],[34,34]]],[1575449182265,["Administrator@zhrb",[[1,34,"项目的改动"]],[34,34],[39,39]]],[1575449186007,["Administrator@zhrb",[[1,29,"# "]],[29,29],[31,31]]],[1575449191968,["Administrator@zhrb",[[1,26,"# 升级前的准备"]],[26,26],[34,34]]],[1575449194517,["Administrator@zhrb",[[1,37,"\n"]],[36,36],[37,37]]],[1575449194669,["Administrator@zhrb",[[1,38,"\n"]],[37,37],[38,38]]],[1575449207007,["Administrator@zhrb",[[1,37,"# 数据的备份与导入"]],[37,37],[47,47]]],[1575449210390,["Administrator@zhrb",[[1,49,"\n"]],[47,47],[48,48]]],[1575449214765,["Administrator@zhrb",[[1,64,"\n"]],[62,62],[63,63]]],[1575449218972,["Administrator@zhrb",[[1,37,"\n"]],[36,36],[37,37]]],[1575449232279,["Administrator@zhrb",[[1,36,"# docker安装MySQL8.01"]],[36,36],[55,55]]],[1575449234046,["Administrator@zhrb",[[-1,54,"1"]],[55,55],[54,54]]],[1575449235312,["Administrator@zhrb",[[1,54,"。16"]],[54,54],[57,57]]],[1575449236524,["Administrator@zhrb",[[-1,54,"。16"]],[57,57],[54,54]]],[1575449247865,["Administrator@zhrb",[[1,54,".16并将数据存储到本地"]],[54,54],[66,66]]],[1575449252989,["Administrator@zhrb",[[1,68,"\n"]],[66,66],[67,67]]],[1575449253862,["Administrator@zhrb",[[1,69,"\n"]],[67,67],[68,68]]],[1575449260656,["Administrator@zhrb",[[1,68,"## 配置密码"]],[68,68],[75,75]]],[1575449265141,["Administrator@zhrb",[[1,77,"\n"]],[75,75],[76,76]]],[1575449274547,["Administrator@zhrb",[[1,76,"## 设置"]],[76,76],[81,81]]],[1575449275989,["Administrator@zhrb",[[-1,76,"## 设置"]],[81,81],[76,76]]],[1575449276165,["Administrator@zhrb",[[-1,77,"\n"]],[76,76],[75,75]]],[1575449276861,["Administrator@zhrb",[[-1,71,"配置密码"]],[75,75],[71,71]]],[1575449278944,["Administrator@zhrb",[[1,71,"设置可以"]],[71,71],[75,75]]],[1575449281537,["Administrator@zhrb",[[1,75,"远程登录"]],[75,75],[79,79]]],[1575449294349,["Administrator@zhrb",[[1,109,"\n"]],[106,106],[107,107]]],[1575449297149,["Administrator@zhrb",[[1,110,"\n"]],[107,107],[108,108]]],[1575449298303,["Administrator@zhrb",[[1,108,"## "]],[108,108],[111,111]]],[1575449342378,["Administrator@zhrb",[[1,111,"mysql-connector-java"]],[111,111],[131,131]]],[1575449343621,["Administrator@zhrb",[[1,134,"\n"]],[131,131],[132,132]]],[1575449343756,["Administrator@zhrb",[[1,135,"\n"]],[132,132],[133,133]]],[1575449348553,["Administrator@zhrb",[[1,132,"<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>${mysql.version}</version>\n</dependency>"]],[132,132],[277,277]]],[1575449350221,["Administrator@zhrb",[[1,281,"\n"]],[277,277],[278,278]]],[1575449350380,["Administrator@zhrb",[[1,282,"\n"]],[278,278],[279,279]]],[1575449353745,["Administrator@zhrb",[[1,279,"## "]],[279,279],[282,282]]],[1575449356213,["Administrator@zhrb",[[1,111,"\n"]],[111,111],[112,112]]],[1575449364857,["Administrator@zhrb",[[1,111,"MySQL依赖版本更换"]],[111,111],[122,122]]],[1575449376133,["Administrator@zhrb",[[1,294,"驱动更换"]],[294,294],[298,298]]],[1575449376404,["Administrator@zhrb",[[1,302,"\n"]],[298,298],[299,299]]],[1575449376611,["Administrator@zhrb",[[1,303,"\n"]],[299,299],[300,300]]],[1575449382462,["Administrator@zhrb",[[1,300,"8以下："]],[300,300],[304,304]]],[1575449382669,["Administrator@zhrb",[[1,308,"\n"]],[304,304],[305,305]]],[1575449396151,["Administrator@zhrb",[[1,305,"```"]],[305,305],[308,308]]],[1575449396179,["Administrator@zhrb",[[1,308,"language\n```\n"]],[308,308],[308,316]]],[1575449396468,["Administrator@zhrb",[[-1,308,"language"],[1,316,"\n"]],[308,316],[309,309]]],[1575449397157,["Administrator@zhrb",[[1,309,"Class.forName(\"com.mysql.cj.jdbc.Driver\"); //MYSQL驱动"]],[309,309],[361,361]]],[1575449399892,["Administrator@zhrb",[[-1,334,"cj."]],[333,336],[333,333]]],[1575449404141,["Administrator@zhrb",[[1,363,"8.0.16"]],[363,363],[369,369]]],[1575449405708,["Administrator@zhrb",[[1,373,"\n"]],[369,369],[370,370]]],[1575449407998,["Administrator@zhrb",[[1,370,"```"]],[370,370],[373,373]]],[1575449408027,["Administrator@zhrb",[[1,373,"language\n```\n"]],[373,373],[373,381]]],[1575449408268,["Administrator@zhrb",[[-1,373,"language"],[1,381,"\n"]],[373,381],[374,374]]],[1575449408900,["Administrator@zhrb",[[1,374,"Class.forName(\"com.mysql.cj.jdbc.Driver\"); //MYSQL驱动"]],[374,374],[426,426]]],[1575449412678,["Administrator@zhrb",[[1,300,"### "]],[300,300],[304,304]]],[1575449415479,["Administrator@zhrb",[[1,367,"### "]],[367,367],[371,371]]],[1575449416702,["Administrator@zhrb",[[-1,307,"："]],[308,308],[307,307]]],[1575449438872,["Administrator@zhrb",[[1,438,"## 数据库连接增加参数"]],[438,438],[450,450]]],[1575449439380,["Administrator@zhrb",[[1,454,"\n"]],[450,450],[451,451]]],[1575449449182,["Administrator@zhrb",[[1,451,"### useSSL=false"]],[451,451],[467,467]]],[1575449450916,["Administrator@zhrb",[[1,471,"\n"]],[467,467],[468,468]]],[1575449478718,["Administrator@zhrb",[[1,468,"否则会报如下错误："]],[468,468],[477,477]]],[1575449478979,["Administrator@zhrb",[[1,481,"\n"]],[477,477],[478,478]]],[1575449480541,["Administrator@zhrb",[[1,478,"```"]],[478,478],[481,481]]],[1575449480569,["Administrator@zhrb",[[1,481,"language\n```\n"]],[481,481],[481,489]]],[1575449480724,["Administrator@zhrb",[[-1,481,"language"],[1,489,"\n"]],[481,489],[482,482]]],[1575449481595,["Administrator@zhrb",[[1,482," Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification."]],[482,482],[963,963]]],[1575449487237,["Administrator@zhrb",[[1,968,"### she"]],[968,968],[975,975]]],[1575449488107,["Administrator@zhrb",[[-1,972,"she"]],[975,975],[972,972]]],[1575449488439,["Administrator@zhrb",[[1,972,"s"]],[972,972],[973,973]]],[1575449489140,["Administrator@zhrb",[[-1,972,"s"]],[973,973],[972,972]]],[1575449489805,["Administrator@zhrb",[[1,972,"s"]],[972,972],[973,973]]],[1575449490555,["Administrator@zhrb",[[-1,972,"s"]],[973,973],[972,972]]],[1575449493264,["Administrator@zhrb",[[1,972,"设置时区"]],[972,972],[976,976]]],[1575449493939,["Administrator@zhrb",[[1,980,"\n"]],[976,976],[977,977]]],[1575449507539,["Administrator@zhrb",[[1,438,"\n"]],[437,437],[438,438]]],[1575449509359,["Administrator@zhrb",[[1,438,"ru"]],[438,438],[437,440]]],[1575449509977,["Administrator@zhrb",[[-1,437,"\nru\n"],[1,441,"如果"]],[437,437],[439,439]]],[1575449511771,["Administrator@zhrb",[[1,439,"\n"]],[439,439],[440,440]]],[1575449512067,["Administrator@zhrb",[[1,440,"\n"]],[440,440],[441,441]]],[1575449516923,["Administrator@zhrb",[[1,437,"\n"]],[437,437],[438,438]]],[1575449517091,["Administrator@zhrb",[[1,438,"\n"]],[438,438],[439,439]]],[1575449527622,["Administrator@zhrb",[[1,441,"驱动没有修改会报如下错误："]],[441,441],[454,454]]],[1575449527947,["Administrator@zhrb",[[1,456,"\n"]],[454,454],[455,455]]],[1575449530093,["Administrator@zhrb",[[1,455,"···"]],[455,455],[458,458]]],[1575449530890,["Administrator@zhrb",[[-1,455,"···"]],[458,458],[455,455]]],[1575449531781,["Administrator@zhrb",[[1,455,"```"]],[455,455],[458,458]]],[1575449531987,["Administrator@zhrb",[[1,460,"\n"]],[458,458],[459,459]]],[1575449533076,["Administrator@zhrb",[[1,459,"```"]],[459,459],[462,462]]],[1575449534299,["Administrator@zhrb",[[1,459,"\n"]],[458,458],[459,459]]],[1575449534587,["Administrator@zhrb",[[1,459,"Loading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.\n"]],[459,459],[686,686]]],[1575449559222,["Administrator@zhrb",[[1,1232,"```"]],[1232,1232],[1235,1235]]],[1575449559256,["Administrator@zhrb",[[1,1235,"language\n```\n"]],[1235,1235],[1235,1243]]],[1575449559491,["Administrator@zhrb",[[-1,1235,"language"],[1,1243,"\n"]],[1235,1243],[1236,1236]]],[1575449560099,["Administrator@zhrb",[[1,1236,"&serverTimezone=GMT%2B8"]],[1236,1236],[1259,1259]]],[1575449562540,["Administrator@zhrb",[[-1,1236,"&"]],[1237,1237],[1236,1236]]],[1575449565914,["Administrator@zhrb",[[1,1266,"\n"]],[1263,1263],[1264,1264]]],[1575449566052,["Administrator@zhrb",[[1,1267,"\n"]],[1264,1264],[1265,1265]]],[1575449567204,["Administrator@zhrb",[[1,1265,"xiu"]],[1265,1265],[1268,1268]]],[1575449568090,["Administrator@zhrb",[[-1,1265,"xiu"]],[1268,1268],[1265,1265]]],[1575449576583,["Administrator@zhrb",[[1,1265,"修改后的数据库URL连接"]],[1265,1265],[1277,1277]]],[1575449585341,["Administrator@zhrb",[[1,1277,"例如下所示："]],[1277,1277],[1283,1283]]],[1575449585642,["Administrator@zhrb",[[1,1286,"\n"]],[1283,1283],[1284,1284]]],[1575449587284,["Administrator@zhrb",[[1,1284,"```"]],[1284,1284],[1287,1287]]],[1575449587318,["Administrator@zhrb",[[1,1287,"language\n```\n"]],[1287,1287],[1287,1295]]],[1575449587442,["Administrator@zhrb",[[-1,1287,"language"],[1,1295,"\n"]],[1287,1295],[1288,1288]]],[1575449598125,["Administrator@zhrb",[[1,1288,"jdbc:mysql://\" + db_host + \"/\" + db_name + \"?useUnicode=true&characterEncoding=utf-8&zeroDateTimeBehavior=convertToNull&useSSL=false&serverTimezone=GMT%2B8"]],[1288,1288],[1443,1443]]],[1575449601378,["Administrator@zhrb",[[-1,1299,"//\""]],[1299,1302],[1299,1299]]],[1575449607027,["Administrator@zhrb",[[-1,1300,"+ "]],[1300,1302],[1300,1300]]],[1575449638877,["Administrator@zhrb",[[1,1299,"//"]],[1299,1299],[1301,1301]]],[1575449645482,["Administrator@zhrb",[[-1,1309," + \""]],[1309,1313],[1309,1309]]],[1575449647770,["Administrator@zhrb",[[-1,1310,"\" +"]],[1310,1313],[1310,1310]]],[1575449650826,["Administrator@zhrb",[[-1,1318," + \""]],[1319,1322],[1318,1318]]],[1575449718615,["Administrator@zhrb",[[1,1299,"jdbc:mysql:"],[-1,1301," db_"],[1,1305,"local"],[-1,1309,"/ "],[1,1311,":3306/poesy"]],[1299,1311],[1332,1332]]],[1575449721777,["Administrator@zhrb",[[-1,1327,"poesy"]],[1332,1332],[1327,1327]]],[1575449754531,["Administrator@zhrb",[[1,80,"登录上"]],[80,80],[83,83]]],[1575449756553,["Administrator@zhrb",[[-1,80,"登录上"]],[83,83],[80,80]]],[1575449762395,["Administrator@zhrb",[[1,80,"linux本地登录时"]],[80,80],[90,90]]],[1575449763377,["Administrator@zhrb",[[-1,89,"时"]],[90,90],[89,89]]],[1575449767876,["Administrator@zhrb",[[1,89,"上MySQL环境："]],[89,89],[98,98]]],[1575449768090,["Administrator@zhrb",[[1,99,"\n"]],[98,98],[99,99]]],[1575449772979,["Administrator@zhrb",[[1,99,"```"]],[99,99],[102,102]]],[1575449773609,["Administrator@zhrb",[[1,103,"\n"]],[102,102],[103,103]]],[1575449774372,["Administrator@zhrb",[[1,103,"```"]],[103,103],[106,106]]],[1575449774985,["Administrator@zhrb",[[1,103,"\n"]],[102,102],[103,103]]],[1575449775682,["Administrator@zhrb",[[1,103,"ALTER user 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';"]],[103,103],[175,175]]],[1575449792151,["Administrator@zhrb",[[-1,103,"ALTER u"],[-1,112,"r 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456'"],[1,174,"lect host,user,plugin,authentication_string from mysql.user"]],[103,175],[165,165]]],[1575449795537,["Administrator@zhrb",[[1,99,"\n"]],[98,98],[99,99]]],[1575449796276,["Administrator@zhrb",[[1,99,"#"],[-1,110," "],[1,111," "],[-1,149," "],[1,150," "],[-1,154," "],[1,155," "]],[99,99],[100,100]]],[1575449807540,["Administrator@zhrb",[[1,100,"## 查看用户登录及密码等信息"]],[100,100],[115,115]]],[1575449811777,["Administrator@zhrb",[[1,187,"\n"]],[186,186],[187,187]]],[1575449811872,["Administrator@zhrb",[[1,188,"\n"]],[187,187],[188,188]]],[1575449846070,["Administrator@zhrb",[[1,187,"li"]],[187,187],[186,189]]],[1575449847804,["Administrator@zhrb",[[-1,186,"\nli\n"],[1,190,"列出"]],[186,186],[188,188]]],[1575449848784,["Administrator@zhrb",[[1,186,"\n"]],[186,186],[187,187]]],[1575449854802,["Administrator@zhrb",[[1,189,"来的数据为：| host      | user             | plugin                | authentication_string"]],[189,189],[273,273]]],[1575449857649,["Administrator@zhrb",[[1,195,"\n"]],[195,195],[196,196]]],[1575449860113,["Administrator@zhrb",[[1,275,"\n"]],[274,274],[275,275]]],[1575449860264,["Administrator@zhrb",[[1,276,"\n"]],[275,275],[276,276]]],[1575449862221,["Administrator@zhrb",[[-1,197," "],[1,198," "],[-1,202,"      | "],[1,210,"      | "],[-1,214,"             | "],[1,229,"             | "],[-1,235,"                | "],[1,253,"                | "],[1,276,"注意。"]],[276,276],[279,279]]],[1575449863392,["Administrator@zhrb",[[-1,278,"。"]],[279,279],[278,278]]],[1575449904858,["Administrator@zhrb",[[1,278,"：host为%，则为不限IP可远程登录，但是安装过8.0.16直接登录，会提示你  "]],[278,278],[320,320]]],[1575449916851,["Administrator@zhrb",[[1,320,"authentication_string授权错误，"]],[320,320],[346,346]]],[1575449991312,["Administrator@zhrb",[[1,196,"+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n"],[1,274,"                                                  |\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n| %         | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |\n| localhost | mysql.infoschema | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.session    | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.sys        | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n5 rows in set (0.02 sec)\n"]],[196,274],[1391,1391]]],[1575449997624,["Administrator@zhrb",[[-1,196,"+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n"],[-1,404,"                                                  |\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n| %         | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |\n| localhost | mysql.infoschema | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.session    | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.sys        | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n5 rows in set (0.02 sec)\n"]],[1391,1391],[196,274]]],[1575450010776,["Administrator@zhrb",[[1,358,"+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n| host      | user             | plugin                | authentication_string                                                  |\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n| %         | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |\n| localhost | mysql.infoschema | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.session    | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.sys        | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n5 rows in set (0.02 sec)\n"]],[358,358],[1553,1553]]],[1575450014528,["Administrator@zhrb",[[-1,358,"+-----------+------------------+-----------------------+------------------------------------------------------------------------+"]],[358,487],[358,358]]],[1575450016543,["Administrator@zhrb",[[-1,489,"+-----------+------------------+-----------------------+------------------------------------------------------------------------+"]],[489,618],[489,489]]],[1575450025931,["Administrator@zhrb",[[1,489,"|--|--|--|"]],[489,489],[499,499]]],[1575450028939,["Administrator@zhrb",[[1,499,"--|"]],[499,499],[502,502]]],[1575450034111,["Administrator@zhrb",[[-1,1153,"+-----------+------------------+-----------------------+------------------------------------------------------------------------+"]],[1153,1282],[1153,1153]]],[1575450053128,["Administrator@zhrb",[[-1,359,"| host      | user             | plugin                | authentication_string                                                  |\n|--|--|--|--|\n| %         | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |\n| localhost | mysql.infoschema | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.session    | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.sys        | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |"]],[359,1152],[359,359]]],[1575450056376,["Administrator@zhrb",[[1,274,"                                                  |\n|--|--|--|--|\n| %         | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |\n| localhost | mysql.infoschema | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.session    | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.sys        | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |"]],[196,274],[989,989]]],[1575450061156,["Administrator@zhrb",[[-1,193,"为"],[1,194,"类似"]],[193,193],[195,195]]],[1575450063042,["Administrator@zhrb",[[1,195,"如下"]],[195,195],[197,197]]],[1575450076144,["Administrator@zhrb",[[-1,376,"mysql_native"],[1,388,"caching_sha2"]],[376,397],[397,397]]],[1575450080690,["Administrator@zhrb",[[1,993,"zh"]],[993,993],[992,995]]],[1575450082819,["Administrator@zhrb",[[-1,992,"\nzh\n"],[1,996,"注意"]],[992,992],[994,994]]],[1575450084215,["Administrator@zhrb",[[1,994,"\n"]],[994,994],[995,995]]],[1575450087615,["Administrator@zhrb",[[1,992,"\n"]],[992,992],[993,993]]],[1575450087806,["Administrator@zhrb",[[1,993,"\n"]],[993,993],[994,994]]],[1575450090934,["Administrator@zhrb",[[-1,994,"注意"]],[996,996],[994,994]]],[1575450091142,["Administrator@zhrb",[[-1,994,"\n"]],[994,994],[993,993]]],[1575450095652,["Administrator@zhrb",[[1,993,"ci"]],[993,993],[992,995]]],[1575450097875,["Administrator@zhrb",[[-1,992,"\nci\n"],[1,996,"此时"]],[992,992],[994,994]]],[1575450098556,["Administrator@zhrb",[[1,994,"我们"]],[994,994],[996,996]]],[1575450100711,["Administrator@zhrb",[[1,992,"\n"]],[992,992],[993,993]]],[1575450101063,["Administrator@zhrb",[[1,993,"\n"]],[993,993],[994,994]]],[1575450101287,["Administrator@zhrb",[[1,994,"\n"]],[994,994],[995,995]]],[1575450103231,["Administrator@zhrb",[[1,999,"\n"]],[999,999],[1000,1000]]],[1575450103390,["Administrator@zhrb",[[1,1000,"\n"]],[1000,1000],[1001,1001]]],[1575450122226,["Administrator@zhrb",[[1,999,"看第一条数据，此时的plugin项为caching_sha2_password，"]],[999,999],[1039,1039]]],[1575450135132,["Administrator@zhrb",[[1,1111,"客户端解析不了"]],[1111,1111],[1118,1118]]],[1575450144033,["Administrator@zhrb",[[1,1118,"caching_sha2_password加密方式。"]],[1118,1118],[1144,1144]]],[1575450175049,["Administrator@zhrb",[[1,1039,"如果我们想要使用Navicat，datagrip之类的软件远程链接数据路的"]],[1039,1039],[1076,1076]]],[1575450175726,["Administrator@zhrb",[[-1,1074,"路的"]],[1076,1076],[1074,1074]]],[1575450187961,["Administrator@zhrb",[[1,1074,"库的话需要修改第一条数据的密码，"]],[1074,1074],[1090,1090]]],[1575450191558,["Administrator@zhrb",[[-1,1089,"，"]],[1090,1090],[1089,1089]]],[1575450192257,["Administrator@zhrb",[[1,1089,"："]],[1089,1089],[1090,1090]]],[1575450193094,["Administrator@zhrb",[[-1,1089,"："]],[1090,1090],[1089,1089]]],[1575450194923,["Administrator@zhrb",[[1,1089,"，修改"]],[1089,1089],[1092,1092]]],[1575450196078,["Administrator@zhrb",[[-1,1091,"改"]],[1092,1092],[1091,1091]]],[1575450197033,["Administrator@zhrb",[[1,1091,"方式"]],[1091,1091],[1093,1093]]],[1575450198931,["Administrator@zhrb",[[1,1093,"如下："]],[1093,1093],[1096,1096]]],[1575450199158,["Administrator@zhrb",[[1,1098,"\n"]],[1096,1096],[1097,1097]]],[1575450215759,["Administrator@zhrb",[[1,1097,"ALTER user 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';"]],[1097,1097],[1169,1169]]],[1575450218194,["Administrator@zhrb",[[-1,1097,"ALTER user 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';"]],[1169,1169],[1097,1097]]],[1575450220448,["Administrator@zhrb",[[1,1097,"```"]],[1097,1097],[1100,1100]]],[1575450220806,["Administrator@zhrb",[[1,1102,"\n"]],[1100,1100],[1101,1101]]],[1575450221963,["Administrator@zhrb",[[1,1101,"```"]],[1101,1101],[1104,1104]]],[1575450222814,["Administrator@zhrb",[[1,1101,"\n"]],[1100,1100],[1101,1101]]],[1575450223191,["Administrator@zhrb",[[1,1101,"ALTER user 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';"]],[1101,1101],[1173,1173]]],[1575450228640,["Administrator@zhrb",[[-1,1106," "],[1,1107," "],[-1,1111," "],[1,1112," "],[-1,1122," "],[1,1123," "],[-1,1133," "],[1,1134," "],[-1,1138," "],[1,1139," "],[-1,1160," BY "],[1,1164," BY "],[1,1178,"xiugai"]],[1178,1178],[1184,1184]]],[1575450230270,["Administrator@zhrb",[[-1,1178,"xiugai"]],[1184,1184],[1178,1178]]],[1575450230986,["Administrator@zhrb",[[1,1178,"xi"]],[1178,1178],[1177,1180]]],[1575450231690,["Administrator@zhrb",[[-1,1177,"\nxi\n"],[1,1181,"修改"]],[1177,1177],[1179,1179]]],[1575450233173,["Administrator@zhrb",[[1,1179,"之后"]],[1179,1179],[1181,1181]]],[1575450235207,["Administrator@zhrb",[[1,1177,"\n"]],[1177,1177],[1178,1178]]],[1575450237278,["Administrator@zhrb",[[1,1182,"\n"]],[1182,1182],[1183,1183]]],[1575450237423,["Administrator@zhrb",[[1,1183,"\n"]],[1183,1183],[1184,1184]]],[1575450248704,["Administrator@zhrb",[[1,1182,"，一定要刷新权限："]],[1182,1182],[1191,1191]]],[1575450248901,["Administrator@zhrb",[[1,1193,"\n"]],[1191,1191],[1192,1192]]],[1575450250551,["Administrator@zhrb",[[1,1192,"```"]],[1192,1192],[1195,1195]]],[1575450250885,["Administrator@zhrb",[[1,1197,"\n"]],[1195,1195],[1196,1196]]],[1575450251635,["Administrator@zhrb",[[1,1196,"```"]],[1196,1196],[1199,1199]]],[1575450252109,["Administrator@zhrb",[[1,1196,"\n"]],[1195,1195],[1196,1196]]],[1575450261606,["Administrator@zhrb",[[1,1196,"FLUSH PRIVILEGES;"]],[1196,1196],[1213,1213]]],[1575450264201,["Administrator@zhrb",[[-1,1201," "],[1,1202," "],[1,1218,"cishi"]],[1218,1218],[1223,1223]]],[1575450265733,["Administrator@zhrb",[[-1,1218,"cishi"]],[1223,1223],[1218,1218]]],[1575450266753,["Administrator@zhrb",[[1,1218,"ci"]],[1218,1218],[1217,1220]]],[1575450267361,["Administrator@zhrb",[[-1,1217,"\nci\n"],[1,1221,"此时"]],[1217,1217],[1219,1219]]],[1575450284832,["Administrator@zhrb",[[1,1219,"再重新使用客户端软件进行连接就可以连接了。"]],[1219,1219],[1240,1240]]],[1575450285005,["Administrator@zhrb",[[1,1240,"\n"]],[1240,1240],[1241,1241]]],[1575450287614,["Administrator@zhrb",[[1,1217,"\n"]],[1217,1217],[1218,1218]]],[1575450317737,["Administrator@zhrb",[[1,994,"### 修改密码更改"]],[994,994],[1004,1004]]],[1575450327673,["Administrator@zhrb",[[1,1004,"plugin形式"]],[1004,1004],[1012,1012]]],[1575450337645,["Administrator@zhrb",[[1,1236,"\n"]],[1236,1236],[1237,1237]]],[1575450337802,["Administrator@zhrb",[[1,1237,"\n"]],[1237,1237],[1238,1238]]],[1575450339553,["Administrator@zhrb",[[1,1236,"xi"]],[1236,1236],[1235,1238]]],[1575450340289,["Administrator@zhrb",[[-1,1235,"\nxi\n"],[1,1239,"修改"]],[1235,1235],[1237,1237]]],[1575450344370,["Administrator@zhrb",[[1,1237,"之后我们再"]],[1237,1237],[1242,1242]]],[1575450348069,["Administrator@zhrb",[[1,1235,"\n"]],[1235,1235],[1236,1236]]],[1575450348245,["Administrator@zhrb",[[1,1236,"\n"]],[1236,1236],[1237,1237]]],[1575450377305,["Administrator@zhrb",[[1,1244,"使用select host,user,plugin,authentication_string from mysql.user;\n进行查看的时候，发现第一条数据的 plugin方式"]],[1244,1244],[1334,1334]]],[1575450389112,["Administrator@zhrb",[[1,1334,"变成了：mysql_native_password 。"]],[1334,1334],[1361,1361]]],[1575450464945,["Administrator@zhrb",[[1,1501,"## 数据库备份"]],[1501,1501],[1509,1509]]],[1575450465685,["Administrator@zhrb",[[1,1512,"\n"]],[1509,1509],[1510,1510]]],[1575450465860,["Administrator@zhrb",[[1,1513,"\n"]],[1510,1510],[1511,1511]]],[1575450472009,["Administrator@zhrb",[[1,1511,"## 数据库导入"]],[1511,1511],[1519,1519]]],[1575450474836,["Administrator@zhrb",[[1,1511,"\n"]],[1510,1510],[1511,1511]]],[1575450490780,["Administrator@zhrb",[[1,1510,"备份使用的是=mysqldump\n"]],[1510,1510],[1527,1527]]],[1575450492660,["Administrator@zhrb",[[-1,1516,"="]],[1517,1517],[1516,1516]]],[1575450496864,["Administrator@zhrb",[[1,1525,"插件"]],[1525,1525],[1527,1527]]],[1575450497999,["Administrator@zhrb",[[1,1527,"，"]],[1527,1527],[1528,1528]]],[1575450500485,["Administrator@zhrb",[[-1,1527,"，"]],[1528,1528],[1527,1527]]],[1575450501328,["Administrator@zhrb",[[1,1527,"。"]],[1527,1527],[1528,1528]]],[1575450501508,["Administrator@zhrb",[[1,1531,"\n"]],[1528,1528],[1529,1529]]],[1575450513649,["Administrator@zhrb",[[1,1529,"### 非docker环境下备份"]],[1529,1529],[1545,1545]]],[1575450514411,["Administrator@zhrb",[[1,1548,"\n"]],[1545,1545],[1546,1546]]],[1575450515737,["Administrator@zhrb",[[1,1546,"```"]],[1546,1546],[1549,1549]]],[1575450516316,["Administrator@zhrb",[[1,1552,"\n"]],[1549,1549],[1550,1550]]],[1575450516902,["Administrator@zhrb",[[1,1550,"```"]],[1550,1550],[1553,1553]]],[1575450517740,["Administrator@zhrb",[[1,1550,"\n"]],[1549,1549],[1550,1550]]],[1575450531468,["Administrator@zhrb",[[1,1550,"$tool -u $username -p$password $database_name > $backup_dir/$database_name-$dd.sql\n"]],[1550,1550],[1633,1633]]],[1575450535621,["Administrator@zhrb",[[-1,1550,"$tool"],[1,1555,"mysqldump"]],[1550,1555],[1559,1559]]],[1575450548364,["Administrator@zhrb",[[-1,1628,"-$dd"]],[1628,1632],[1628,1628]]],[1575450554517,["Administrator@zhrb",[[1,1638,"### 非docker环境下备份"]],[1638,1638],[1654,1654]]],[1575450556358,["Administrator@zhrb",[[-1,1642,"非"]],[1643,1643],[1642,1642]]],[1575450558037,["Administrator@zhrb",[[1,1655,"\n"]],[1653,1653],[1654,1654]]],[1575450566414,["Administrator@zhrb",[[1,1654,"```"]],[1654,1654],[1657,1657]]],[1575450566782,["Administrator@zhrb",[[1,1659,"\n"]],[1657,1657],[1658,1658]]],[1575450567363,["Administrator@zhrb",[[1,1658,"```"]],[1658,1658],[1661,1661]]],[1575450568149,["Administrator@zhrb",[[1,1658,"\n"]],[1657,1657],[1658,1658]]],[1575450568822,["Administrator@zhrb",[[1,1658,"docker exec mysql sh -c 'exec mysqldump $database_name -u $username -p$password' > $backup_dir/$database_name-$dd.sql\n"]],[1658,1658],[1776,1776]]],[1575450584853,["Administrator@zhrb",[[-1,1767,"-$dd"]],[1767,1771],[1767,1767]]],[1575450600595,["Administrator@zhrb",[[1,1787,"\tdocker exec mysql sh -c 'exec mysqldump --all-databases -uroot -p\"Zhrb1992!\"' > /app/sel/blog/mysqlbackup/tale-20190708.sql\n"]],[1787,1787],[1912,1912]]],[1575450606132,["Administrator@zhrb",[[1,1787,"\n"]],[1786,1786],[1787,1787]]],[1575450606428,["Administrator@zhrb",[[1,1787,"### 非docker环境下备份"]],[1787,1787],[1803,1803]]],[1575450609987,["Administrator@zhrb",[[-1,1801,"备份"],[1,1803,"导入"]],[1801,1803],[1803,1803]]],[1575450615803,["Administrator@zhrb",[[1,1804,"\n"]],[1803,1803],[1804,1804]]],[1575450616011,["Administrator@zhrb",[[1,1804,"### 非docker环境下导入"]],[1804,1804],[1820,1820]]],[1575450617867,["Administrator@zhrb",[[-1,1808,"非"]],[1809,1809],[1808,1808]]],[1575450619500,["Administrator@zhrb",[[1,1820,"\n"]],[1819,1819],[1820,1820]]],[1575450621390,["Administrator@zhrb",[[1,1820,"```"]],[1820,1820],[1823,1823]]],[1575450623328,["Administrator@zhrb",[[1,1949,"```"]],[1949,1949],[1952,1952]]],[1575450631323,["Administrator@zhrb",[[-1,1935,"-20190708."]],[1935,1945],[1935,1935]]],[1575450637027,["Administrator@zhrb",[[-1,1905,"/app/sel/"]],[1905,1914],[1905,1905]]],[1575450642663,["Administrator@zhrb",[[-1,1891,"Zhrb1992!"],[1,1900,"p"]],[1891,1900],[1892,1892]]],[1575450645424,["Administrator@zhrb",[[1,1892,"assword"]],[1892,1892],[1899,1899]]],[1575450668899,["Administrator@zhrb",[[1,1865,"$database_name"]],[1865,1865],[1879,1879]]],[1575450671851,["Administrator@zhrb",[[-1,1879,"--all-databases"]],[1879,1894],[1879,1879]]],[1575450677231,["Administrator@zhrb",[[-1,1933,"5 rows in set (0.02 sec)"],[1,1957,"z"]],[1933,1957],[1934,1934]]],[1575450677733,["Administrator@zhrb",[[1,1934,"huyi"]],[1934,1934],[1938,1938]]],[1575450678875,["Administrator@zhrb",[[-1,1933,"zhuy"]],[1937,1937],[1933,1933]]],[1575450680879,["Administrator@zhrb",[[1,1933,"注意，"]],[1933,1933],[1936,1936]]],[1575450681483,["Administrator@zhrb",[[-1,1935,"，"]],[1936,1936],[1935,1935]]],[1575450694283,["Administrator@zhrb",[[1,1935,"：如果是全量备份整个数据库的话，将--all-databases"]],[1935,1935],[1967,1967]]],[1575450705841,["Administrator@zhrb",[[1,1952,"指定的database_name 换成"]],[1952,1952],[1971,1971]]],[1575450709671,["Administrator@zhrb",[[1,1986,"即可。"]],[1986,1986],[1989,1989]]],[1575450858060,[null,[[-1,1989,"i"]],[1989,1989],[1989,1989]]],[1575450858061,[null,[[1,1989,"i"]],[1989,1989],[1989,1989]]],[1575450801291,["Administrator@zhrb",[[1,1837,"-i "],[-1,1860,"dump $database_name"],[-1,1890,"password\"' > "],[1,1903,"Zhrb1992!\"' < /app/sel/"],[1,1924,"_sel-selblog-20190708."],[1,1927,"\n"]],[1824,1927],[1944,1944]]],[1575450807660,["Administrator@zhrb",[[-1,1874,"Zhrb1992!"],[1,1883,"password"]],[1874,1874],[1882,1882]]],[1575450812170,["Administrator@zhrb",[[-1,1929,"-20190708"]],[1929,1938],[1929,1929]]],[1575450820826,["Administrator@zhrb",[[1,1804,"\n"]],[1803,1803],[1804,1804]]],[1575450823044,["Administrator@zhrb",[[1,1804,"```"]],[1804,1804],[1807,1807]]],[1575450823346,["Administrator@zhrb",[[1,1808,"\n"]],[1807,1807],[1808,1808]]],[1575450823948,["Administrator@zhrb",[[1,1808,"```"]],[1808,1808],[1811,1811]]],[1575450824890,["Administrator@zhrb",[[1,1808,"\n"]],[1807,1807],[1808,1808]]],[1575450825266,["Administrator@zhrb",[[1,1808,"mysql -uroot -p\"password\"' < /app/sel/blog/mysqlbackup/tale_sel-selblog.sql"]],[1808,1808],[1883,1883]]],[1575450852242,["Administrator@zhrb",[[-1,1833,"'"]],[1834,1834],[1833,1833]]],[1575450853966,["Administrator@zhrb",[[1,1834," "]],[1833,1833],[1834,1834]]],[1575450857471,["Administrator@zhrb",[[1,1834,"databasename"]],[1834,1834],[1846,1846]]],[1575450918055,[null,[[-1,2092,"i"]],[2092,2092],[2092,2092]]],[1575450918055,[null,[[1,2092,"i"]],[2092,2092],[2092,2092]]],[1575450892675,["Administrator@zhrb",[[1,67,"## "]],[67,67],[70,70]]],[1575450893265,["Administrator@zhrb",[[1,71,"\n"]],[70,70],[71,71]]],[1575450894560,["Administrator@zhrb",[[1,71,"···"]],[71,71],[74,74]]],[1575450895649,["Administrator@zhrb",[[-1,71,"···"]],[74,74],[71,71]]],[1575450896551,["Administrator@zhrb",[[1,71,"```"]],[71,71],[74,74]]],[1575450897241,["Administrator@zhrb",[[1,75,"\n"]],[74,74],[75,75]]],[1575450897900,["Administrator@zhrb",[[1,75,"```"]],[75,75],[78,78]]],[1575450898785,["Administrator@zhrb",[[1,75,"\n"]],[74,74],[75,75]]],[1575450899409,["Administrator@zhrb",[[1,75,"docker run --name mysql \\\n    --restart=always \\\n    -p 3306:3306 \\\n    -v /opt/docker-mysql/conf.d:/etc/mysql/conf.d \\\n    -v /opt/docker-mysql/var/lib/mysql:/var/lib/mysql \\\n    -e MYSQL_ROOT_PASSWORD=Zhrb1992! \\\n    -d mysql:8.0.16"]],[75,75],[309,309]]],[1575450904204,["Administrator@zhrb",[[-1,278,"Zhrb"],[-1,283,"992!"]],[278,287],[279,279]]],[1575450907699,["Administrator@zhrb",[[1,279,"23456!"]],[279,279],[285,285]]],[1575450911004,["Administrator@zhrb",[[1,278,"Aa"]],[278,278],[280,280]]],[1575450978064,[null,[[-1,2338,"i"]],[2338,2338],[2338,2338]]],[1575450978064,[null,[[1,2338,"i"]],[2338,2338],[2338,2338]]],[1575450938841,["Administrator@zhrb",[[1,71,"\n"]],[70,70],[71,71]]],[1575450939523,["Administrator@zhrb",[[1,71,"##"]],[71,71],[73,73]]],[1575450941131,["Administrator@zhrb",[[1,74,"\n"]],[73,73],[74,74]]],[1575450943196,["Administrator@zhrb",[[1,73," "]],[73,73],[74,74]]],[1575450947706,["Administrator@zhrb",[[1,70,"拉取镜像"]],[70,70],[74,74]]],[1575450947936,["Administrator@zhrb",[[1,75,"\n"]],[74,74],[75,75]]],[1575450949974,["Administrator@zhrb",[[1,75,"```"]],[75,75],[78,78]]],[1575450950385,["Administrator@zhrb",[[1,79,"\n"]],[78,78],[79,79]]],[1575450950944,["Administrator@zhrb",[[1,79,"```"]],[79,79],[82,82]]],[1575450951517,["Administrator@zhrb",[[1,79,"\n"]],[78,78],[79,79]]],[1575450952093,["Administrator@zhrb",[[1,79,"```ruby\n$ docker pull mysql:8.0.16\n```"]],[79,79],[117,117]]],[1575450954268,["Administrator@zhrb",[[1,86,"\\\\"]],[86,86],[88,88]]],[1575450956354,["Administrator@zhrb",[[-1,82,"ruby\\\\"]],[88,88],[82,82]]],[1575450959683,["Administrator@zhrb",[[-1,83,"$ docker pull mysql:8.0.16"]],[83,109],[83,83]]],[1575450962587,["Administrator@zhrb",[[1,79,"\n"]],[78,78],[79,79]]],[1575450962802,["Administrator@zhrb",[[1,79,"$ docker pull mysql:8.0.16"]],[79,79],[105,105]]],[1575450965454,["Administrator@zhrb",[[1,110,"## "]],[110,110],[113,113]]],[1575451038075,[null,[[-1,2394,"i"]],[2394,2394],[2394,2394]]],[1575451038075,[null,[[1,2394,"i"]],[2394,2394],[2394,2394]]],[1575450996337,["Administrator@zhrb",[[1,114,"\n"]],[113,113],[114,114]]],[1575450996603,["Administrator@zhrb",[[1,114,"将全部的配置文件和关联的文件夹统一放到`/opt/docker-mysql`中"]],[114,114],[153,153]]],[1575451005997,["Administrator@zhrb",[[1,113,"配置本地文件挂在到镜像"]],[113,113],[124,124]]],[1575451009758,["Administrator@zhrb",[[1,119,"用于"]],[119,119],[121,121]]],[1575451013241,["Administrator@zhrb",[[1,171,"\n"]],[170,170],[171,171]]],[1575451024075,["Administrator@zhrb",[[1,171,"```ruby\n$ mkdir -p /opt/docker-mysql/conf.d\n```"]],[171,171],[218,218]]],[1575451027032,["Administrator@zhrb",[[-1,215,"```"]],[218,218],[215,215]]],[1575451028864,["Administrator@zhrb",[[-1,171,"```ruby"]],[171,178],[171,171]]],[1575451037460,["Administrator@zhrb",[[1,208,"$ vim"]],[208,208],[213,213]]],[1575451098063,[null,[[-1,2490,"i"]],[2490,2490],[2490,2490]]],[1575451098063,[null,[[1,2490,"i"]],[2490,2490],[2490,2490]]],[1575451044563,["Administrator@zhrb",[[1,213," "]],[213,213],[214,214]]],[1575451051816,["Administrator@zhrb",[[-1,210,"vim "]],[214,214],[210,210]]],[1575451072344,["Administrator@zhrb",[[1,210,"vim /opt/docker-mysql/config-file.cnf"]],[210,210],[247,247]]],[1575451158078,[null,[[-1,2524,"i"]],[2524,2524],[2524,2524]]],[1575451158078,[null,[[1,2524,"i"]],[2524,2524],[2524,2524]]],[1575451145178,["Administrator@zhrb",[[1,252,"\n"]],[251,251],[252,252]]],[1575451145367,["Administrator@zhrb",[[1,253,"\n"]],[252,252],[253,253]]],[1575451147608,["Administrator@zhrb",[[1,253,"```"]],[253,253],[256,256]]],[1575451148224,["Administrator@zhrb",[[1,257,"\n"]],[256,256],[257,257]]],[1575451149466,["Administrator@zhrb",[[1,257,"```"]],[257,257],[260,260]]],[1575451150721,["Administrator@zhrb",[[1,256,"```csharp\n[mysqld]\n# 表名不区分大小写\nlower_case_table_names=1 \n#server-id=1\ndatadir=/var/lib/mysql\n#socket=/var/lib/mysql/mysqlx.sock\n#symbolic-links=0\n# sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES \n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n```"]],[256,256],[539,539]]],[1575451155267,["Administrator@zhrb",[[-1,256,"```csharp\n[mysqld]\n# 表名不区分大小写\nlower_case_table_names=1 \n#server-id=1\ndatadir=/var/lib/mysql\n#socket=/var/lib/mysql/mysqlx.sock\n#symbolic-links=0\n# sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES \n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n```"]],[539,539],[256,256]]],[1575451218082,[null,[[-1,2533,"i"]],[2533,2533],[2533,2533]]],[1575451218082,[null,[[1,2533,"i"]],[2533,2533],[2533,2533]]],[1575451161471,["Administrator@zhrb",[[1,257,"\n"]],[256,256],[257,257]]],[1575451161712,["Administrator@zhrb",[[1,257,"```csharp\n[mysqld]\n# 表名不区分大小写\nlower_case_table_names=1 \n#server-id=1\ndatadir=/var/lib/mysql\n#socket=/var/lib/mysql/mysqlx.sock\n#symbolic-links=0\n# sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES \n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n```"]],[257,257],[540,540]]],[1575451164640,["Administrator@zhrb",[[-1,257,"```csharp"]],[257,266],[257,257]]],[1575451166055,["Administrator@zhrb",[[-1,528,"```"]],[528,531],[528,528]]],[1575451180562,["Administrator@zhrb",[[1,252,"config-file.cnf内容如下："]],[252,252],[272,272]]],[1575451197200,["Administrator@zhrb",[[1,248,"\n"]],[247,247],[248,248]]],[1575451197624,["Administrator@zhrb",[[1,248,"```csharp\nmkdir -p /opt/docker-mysql/var/lib/mysql\n```"]],[248,248],[302,302]]],[1575451199952,["Administrator@zhrb",[[-1,248,"```csharp"]],[248,257],[248,248]]],[1575451201055,["Administrator@zhrb",[[-1,290,"```"]],[290,293],[290,290]]],[1575451204178,["Administrator@zhrb",[[1,249,"$ "]],[249,249],[251,251]]],[1575451217787,["Administrator@zhrb",[[1,601,"启动"]],[601,601],[603,603]]],[1575451278080,[null,[[-1,2872,"i"]],[2872,2872],[2872,2872]]],[1575451278080,[null,[[1,2872,"i"]],[2872,2872],[2872,2872]]],[1575451219315,["Administrator@zhrb",[[1,603,"镜像"]],[603,603],[605,605]]],[1575451338085,[null,[[-1,2874,"i"]],[2874,2874],[2874,2874]]],[1575451338085,[null,[[1,2874,"i"]],[2874,2874],[2874,2874]]],[1575451278279,["Administrator@zhrb",[[1,67,"\n"]],[66,66],[67,67]]],[1575451290529,["Administrator@zhrb",[[1,67,"## docker安装MySQL8.0.16"]],[67,67],[89,89]]],[1575451293408,["Administrator@zhrb",[[1,92,"#"]],[92,92],[93,93]]],[1575451294673,["Administrator@zhrb",[[1,136,"#"]],[136,136],[137,137]]],[1575451298186,["Administrator@zhrb",[[1,625,"#"]],[625,625],[626,626]]],[1575451300249,["Administrator@zhrb",[[1,878,"#"]],[878,878],[879,879]]],[1575451308330,["Administrator@zhrb",[[1,1806,"#"]],[1806,1806],[1807,1807]]],[1575451311833,["Administrator@zhrb",[[1,911,"#"]],[911,911],[912,912]]],[1575451326383,["Administrator@zhrb",[[1,2173,"**"],[1,2196,"**"]],[2173,2196],[2173,2200]]],[1575451398085,[null,[[-1,2907,"i"]],[2907,2907],[2907,2907]]],[1575451398085,[null,[[1,2907,"i"]],[2907,2907],[2907,2907]]],[1575451360606,["Administrator@zhrb",[[-1,38,"docker安装MySQL8.0.16并将数据存储到本地"],[1,66,"准备"]],[38,38],[40,40]]],[1575451370162,["Administrator@zhrb",[[1,40,"MySQL8.0.16环境"]],[40,40],[53,53]]],[1575451378208,["Administrator@zhrb",[[1,37,"#"]],[37,37],[38,38]]],[1575451379097,["Administrator@zhrb",[[1,57,"#"]],[57,57],[58,58]]],[1575451379704,["Administrator@zhrb",[[1,82,"#"]],[82,82],[83,83]]],[1575451381449,["Administrator@zhrb",[[1,127,"#"]],[127,127],[128,128]]],[1575451384480,["Administrator@zhrb",[[1,617,"#"]],[617,617],[618,618]]],[1575451386279,["Administrator@zhrb",[[1,871,"#"]],[871,871],[872,872]]],[1575451387024,["Administrator@zhrb",[[1,905,"#"]],[905,905],[906,906]]],[1575451389594,["Administrator@zhrb",[[1,1802,"#"]],[1802,1802],[1803,1803]]],[1575451395147,["Administrator@zhrb",[[1,2301,"#"]],[2301,2301],[2302,2302]]],[1575451396024,["Administrator@zhrb",[[1,2314,"#"]],[2314,2314],[2315,2315]]],[1575451397721,["Administrator@zhrb",[[1,2344,"#"]],[2344,2344],[2345,2345]]],[1575451458084,[null,[[-1,2905,"i"]],[2905,2905],[2905,2905]]],[1575451458084,[null,[[1,2905,"i"]],[2905,2905],[2905,2905]]],[1575451399186,["Administrator@zhrb",[[1,2454,"#"]],[2454,2454],[2455,2455]]],[1575451401601,["Administrator@zhrb",[[1,2594,"#"]],[2594,2594],[2595,2595]]],[1575451402360,["Administrator@zhrb",[[1,2605,"#"]],[2605,2605],[2606,2606]]],[1575451435117,["Administrator@zhrb",[[1,901,"\n"]],[900,900],[901,901]]],[1575451436916,["Administrator@zhrb",[[1,901,"```"]],[901,901],[904,904]]],[1575451437565,["Administrator@zhrb",[[1,905,"\n"]],[904,904],[905,905]]],[1575451438290,["Administrator@zhrb",[[1,905,"```"]],[905,905],[908,908]]],[1575451438989,["Administrator@zhrb",[[1,905,"\n"]],[904,904],[905,905]]],[1575451457034,["Administrator@zhrb",[[1,905,"docker exec -it mysql"]],[905,905],[926,926]]],[1575451508664,[null,[[-1,2938,"i"]],[2938,2938],[2938,2938]]],[1575451508664,[null,[[1,2938,"i"]],[2938,2938],[2938,2938]]],[1575451459145,["Administrator@zhrb",[[1,926," bash"]],[926,926],[931,931]]],[1575451465105,["Administrator@zhrb",[[1,905,"$ "]],[905,905],[907,907]]],[1575451466582,["Administrator@zhrb",[[1,938,"\n"]],[937,937],[938,938]]],[1575451468649,["Administrator@zhrb",[[1,938,"ji"]],[938,938],[937,940]]],[1575451469449,["Administrator@zhrb",[[-1,937,"\nji\n"],[1,941,"进入"]],[937,937],[939,939]]],[1575451469918,["Administrator@zhrb",[[1,939,"到"]],[939,939],[940,940]]],[1575451471309,["Administrator@zhrb",[[1,940,"\n"]],[940,940],[941,941]]],[1575451472831,["Administrator@zhrb",[[1,937,"\n"]],[937,937],[938,938]]],[1575451475468,["Administrator@zhrb",[[1,941,"bs"]],[941,941],[943,943]]],[1575451476220,["Administrator@zhrb",[[-1,942,"s"]],[943,943],[942,942]]],[1575451484458,["Administrator@zhrb",[[1,942,"ash环境下，登录MySQL"]],[942,942],[956,956]]],[1575451485349,["Administrator@zhrb",[[1,957,"\n"]],[956,956],[957,957]]],[1575451487404,["Administrator@zhrb",[[1,957,"```"]],[957,957],[960,960]]],[1575451487602,["Administrator@zhrb",[[1,961,"\n"]],[960,960],[961,961]]],[1575451489714,["Administrator@zhrb",[[1,961,"```"]],[961,961],[964,964]]],[1575451490469,["Administrator@zhrb",[[1,961,"\n"]],[960,960],[961,961]]],[1575451493527,["Administrator@zhrb",[[1,961,"msyql -u "]],[961,961],[970,970]]],[1575451494014,["Administrator@zhrb",[[-1,969," "]],[970,970],[969,969]]],[1575451501752,["Administrator@zhrb",[[1,969,"root -pAa123456!"]],[969,969],[985,985]]],[1575451568659,[null,[[-1,2997,"i"]],[2997,2997],[2997,2997]]],[1575451568659,[null,[[1,2997,"i"]],[2997,2997],[2997,2997]]],[1575451567961,["Administrator@zhrb",[[1,25,"# "]],[25,25],[27,27]]],[1575451579279,[null,[[-1,2999,"i"]],[2999,2999],[2999,2999]]],[1575451579279,[null,[[1,2999,"i"]],[2999,2999],[2999,2999]]],[1575451572580,["Administrator@zhrb",[[-1,26," "]],[27,27],[26,26]]],[1575451577031,["Administrator@zhrb",[[1,26," 为什么要升级"]],[26,26],[33,33]]]],null,"Administrator@zhrb"],["c3c065d2-159b-43e3-ac6c-511bbedc62c2",1575506386529,"# 那些年我把MySQL从5.7升到8.0.16\n# 为什么要升级\n# 升级前的准备\n\n## 准备MySQL8.0.16环境\n### docker安装MySQL8.0.16\n#### 拉取镜像\n```\n$ docker pull mysql:8.0.16\n```\n#### 配置本地文件用于挂在到镜像\n将全部的配置文件和关联的文件夹统一放到`/opt/docker-mysql`中\n```\n\n$ mkdir -p /opt/docker-mysql/conf.d\n$ vim /opt/docker-mysql/config-file.cnf\n\n$ mkdir -p /opt/docker-mysql/var/lib/mysql\n\n```\nconfig-file.cnf内容如下：\n```\n\n[mysqld]\n# 表名不区分大小写\nlower_case_table_names=1 \n#server-id=1\ndatadir=/var/lib/mysql\n#socket=/var/lib/mysql/mysqlx.sock\n#symbolic-links=0\n# sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES \n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\n```\n#### 启动镜像\n\n```\ndocker run --name mysql \\\n    --restart=always \\\n    -p 3306:3306 \\\n    -v /opt/docker-mysql/conf.d:/etc/mysql/conf.d \\\n    -v /opt/docker-mysql/var/lib/mysql:/var/lib/mysql \\\n    -e MYSQL_ROOT_PASSWORD=Aa123456! \\\n    -d mysql:8.0.16\n```\n#### 设置可以远程登录\nlinux本地登录上MySQL环境：\n```\n$ docker exec -it mysql bash\n```\n进入到bash环境下，登录MySQL\n```\nmsyql -uroot -pAa123456!\n```\n##### 查看用户登录及密码等信息\n```\nselect host,user,plugin,authentication_string from mysql.user;\n```\n列出来的数据类似如下：\n| host      | user             | plugin                | authentication_string                                                  |\n|--|--|--|--|\n| %         | root             | caching_sha2_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |\n| localhost | mysql.infoschema | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.session    | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | mysql.sys        | caching_sha2_password | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |\n| localhost | root             | mysql_native_password | *066C39CBB06FD4D073E2EB842453110EE953F9B6                              |\n\n##### 修改密码更改plugin形式\n此时我们看第一条数据，此时的plugin项为caching_sha2_password，如果我们想要使用Navicat，datagrip之类的软件远程链接数据库的话需要修改第一条数据的密码，修方式如下：\n```\nALTER user 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';\n```\n修改之后，一定要刷新权限：\n```\nFLUSH PRIVILEGES;\n```\n\n修改之后我们再使用select host,user,plugin,authentication_string from mysql.user;\n进行查看的时候，发现第一条数据的 plugin方式变成了：mysql_native_password 。\n**此时再重新使用客户端软件进行连接就可以连接了。**\n注意：host为%，则为不限IP可远程登录，但是安装过8.0.16直接登录，会提示你  authentication_string授权错误，客户端解析不了caching_sha2_password加密方式。\n## 数据的备份与导入\n### 数据库备份\n备份使用的是mysqldump插件。\n#### 非docker环境下备份\n```\nmysqldump -u $username -p$password $database_name > $backup_dir/$database_name.sql\n\n```\n#### docker环境下备份\n```\ndocker exec mysql sh -c 'exec mysqldump $database_name -u $username -p$password' > $backup_dir/$database_name.sql\n\n```\n\n### 数据库导入\n#### 非docker环境下导入\n```\nmysql -uroot -p\"password\" databasename < /app/sel/blog/mysqlbackup/tale_sel-selblog.sql\n```\n### docker环境下导入\n```\n\tdocker exec -i mysql sh -c 'exec mysql -uroot -p\"password\"' < /app/sel/blog/mysqlbackup/tale_sel-selblog.sql\n\n```\n\n注意：如果是全量备份整个数据库的话，将指定的database_name 换成--all-databases即可。\n\n\n# 升级后关于项目的改动\n\n## MySQL依赖版本更换\nmysql-connector-java\n<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>${mysql.version}</version>\n</dependency>\n\n## 驱动更换\n\n### 8以下\n```\nClass.forName(\"com.mysql.jdbc.Driver\"); //MYSQL驱动\n```\n### 8.0.16\n```\nClass.forName(\"com.mysql.cj.jdbc.Driver\"); //MYSQL驱动\n```\n\n如果驱动没有修改会报如下错误：\n```\nLoading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.\n\n```\n\n## 数据库连接增加参数\n### useSSL=false\n否则会报如下错误：\n```\n Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\n```\n### 设置时区\n\n```\nserverTimezone=GMT%2B8\n```\n\n\n修改后的数据库URL连接例如下所示：\n```\njdbc:mysql:jdbc:mysql://localhost:3306/db_name?useUnicode=true&characterEncoding=utf-8&zeroDateTimeBehavior=convertToNull&useSSL=false&serverTimezone=GMT%2B8\n```\n\n\n\n",[[1575506348961,["Administrator@zhrb",[[1,34,"\n"]],[33,33],[34,34]]],[1575506350180,["Administrator@zhrb",[[1,34,"bi"]],[34,34],[36,36]]],[1575506351193,["Administrator@zhrb",[[-1,34,"bi"]],[36,36],[34,34]]],[1575506382546,["Administrator@zhrb",[[1,34,"笔者之前linux本地安装的MySQL5.7，但是由于服务器内存较小，"]],[34,34],[69,69]]],[1575506387847,["Administrator@zhrb",[[-1,68,"，"]],[69,69],[68,68]]],[1575506403628,["Administrator@zhrb",[[1,68,"等原因，时不时的数据库就崩了，蓝瘦，而且诶"]],[68,68],[89,89]]],[1575506404118,["Administrator@zhrb",[[-1,88,"诶"]],[89,89],[88,88]]],[1575506438964,["Administrator@zhrb",[[1,88,"早就将redis等服务应用到了docker中，所以"]],[88,88],[113,113]]],[1575506443509,["Administrator@zhrb",[[-1,111,"所以"]],[113,113],[111,111]]],[1575506445120,["Administrator@zhrb",[[1,111,"而且"]],[111,111],[113,113]]],[1575506448440,["Administrator@zhrb",[[1,113,"想试试8"]],[113,113],[117,117]]],[1575506449525,["Administrator@zhrb",[[-1,116,"8"]],[117,117],[116,116]]],[1575506498877,["Administrator@zhrb",[[1,116,"MySQL8的新特性，所以想着切换成MySQL8，然后就直接docker安装了，省的本地维护。"]],[116,116],[163,163]]],[1575506530534,["Administrator@zhrb",[[1,362,"\n"]],[361,361],[362,362]]],[1575506619158,["Administrator@zhrb",[[1,1152,">"]],[1152,1152],[1153,1153]]],[1575506633788,["Administrator@zhrb",[[1,2154,"> "]],[2154,2154],[2156,2156]]],[1575506636677,["Administrator@zhrb",[[-1,2155," "]],[2156,2156],[2155,2155]]],[1575506640061,["Administrator@zhrb",[[1,2250,">"]],[2250,2250],[2251,2251]]],[1575507140708,["Administrator@zhrb",[[1,2594,">"]],[2594,2594],[2595,2595]]],[1575507143163,["Administrator@zhrb",[[1,2704,">"]],[2704,2704],[2705,2705]]],[1575507143977,["Administrator@zhrb",[[-1,2704,">"]],[2705,2705],[2704,2704]]],[1575507146672,["Administrator@zhrb",[[-1,2594,">"]],[2595,2595],[2594,2594]]],[1575507198031,["Administrator@zhrb",[[-1,3297,"${mysql.version}"],[1,3313,"8"]],[3297,3313],[3298,3298]]],[1575507199637,["Administrator@zhrb",[[1,3298,".0.13"]],[3298,3298],[3303,3303]]],[1575507223804,["Administrator@zhrb",[[1,3191,"版本更改为8.0.16，截止到20191204，"]],[3191,3191],[3215,3215]]],[1575507233443,["Administrator@zhrb",[[1,3215,"没有8.0.16版本的。"]],[3215,3215],[3227,3227]]],[1575507235103,["Administrator@zhrb",[[-1,3226,"。"]],[3227,3227],[3226,3226]]],[1575507244136,["Administrator@zhrb",[[1,3226,"，所以用8.0.X都行。"]],[3226,3226],[3238,3238]]],[1575507284153,["Administrator@zhrb",[[-1,3800,"=false"],[1,3806,"\n"]],[3800,3806],[3801,3801]]],[1575507284514,["Administrator@zhrb",[[1,3802,"\n"]],[3801,3801],[3802,3802]]],[1575507287407,["Administrator@zhrb",[[1,3802,"要"]],[3802,3802],[3803,3803]]],[1575507289223,["Administrator@zhrb",[[-1,3802,"要"]],[3803,3803],[3802,3802]]],[1575507328469,["Administrator@zhrb",[[1,3802,"要在数据库连接上指定是否启用SSL加密，加密的话肯定是影响数据传输速度的，"]],[3802,3802],[3839,3839]]],[1575507332635,["Administrator@zhrb",[[1,3810,"明确"]],[3810,3810],[3812,3812]]],[1575507341991,["Administrator@zhrb",[[1,3841,"故笔者直接设置"]],[3841,3841],[3848,3848]]],[1575507345753,["Administrator@zhrb",[[1,3850,"\n"]],[3849,3849],[3850,3850]]],[1575507350117,["Administrator@zhrb",[[1,3850,"useSSLf"]],[3850,3850],[3857,3857]]],[1575507350879,["Administrator@zhrb",[[-1,3856,"f"]],[3857,3857],[3856,3856]]],[1575507356076,["Administrator@zhrb",[[1,3856,"=false."]],[3856,3856],[3863,3863]]],[1575507357505,["Administrator@zhrb",[[-1,3862,"."]],[3863,3863],[3862,3862]]],[1575507358648,["Administrator@zhrb",[[1,3862,"。"]],[3862,3862],[3863,3863]]],[1575507574552,[null,[[1,3848,"："],[-1,3849,"否"],[1,3864,"否"]],[3848,3848],[3865,3865]]],[1575507574552,[null,[[-1,3848,"："],[1,3850,"否"],[-1,3864,"否"]],[3865,3865],[3848,3848]]],[1575507572292,["Administrator@zhrb",[[-1,275,"挂在"]],[275,275],[275,275]]],[1575507573744,["Administrator@zhrb",[[1,275,"挂载"]],[275,275],[277,277]]]],null,"Administrator@zhrb"]]}